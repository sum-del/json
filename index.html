<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>阿里云</title>
    <link rel="stylesheet" href="./index.css">
    <script src="jquery-3.4.1.js"></script>
</head>
<body>
    <div class="body">
        <div class="banner">
            <div class="lb">
                <ul>
                    <li class="imgli active"><img src="img/1.jpg" ></li>
                    <li class="imgli"><img src="img/2.png" ></li>
                    <li class="imgli"><img src="img/3.jpg" ></li>
                    <li class="imgli"><img src="img/4.png" ></li>
                    <li class="imgli"><img src="img/5.jpg" ></li>
                </ul>
            </div>
            <div class="button">
                <ul>
                    <li class="control action"></li>
                    <li class="control "></li>
                    <li class="control "></li>
                    <li class="control "></li>
                    <li class="control "></li>
                </ul>
            </div>
        </div>
        <div class="bottom">
            <div class="left">
                <ul>
                    <li class="item">
                        <div class="flex">
                            <div class="top">买商标上阿里云</div>
                            <div class="center">海量资源库明码标价，即买即用，省时省心</div>
                            <img src="https://img.alicdn.com/tfs/TB1AANchxD1gK0jSZFKXXcJrVXa-134-134.png">
                        </div>
                    </li>
                    <li class="item">
                        <div class="flex">
                            <div class="top">买商标上阿里云</div>
                            <div class="center">海量资源库明码标价，即买即用，省时省心</div>
                            <img src="https://img.alicdn.com/tfs/TB1AANchxD1gK0jSZFKXXcJrVXa-134-134.png">
                        </div>
                    </li>
                    <li>
                        <div class="flex">
                            <div class="top">买商标上阿里云</div>
                            <div class="center">海量资源库明码标价，即买即用，省时省心</div>
                            <img src="https://img.alicdn.com/tfs/TB1AANchxD1gK0jSZFKXXcJrVXa-134-134.png">
                        </div>
                    </li>
                </ul>
            </div>
            <div class="right block">
                <div class="avatar"><img src="https://img.alicdn.com/tfs/TB1Sv5PV9zqK1RjSZPcXXbTepXa-80-80.png" alt="头像"></div>
                <div CLASS="text">Hi!欢迎来到阿里云</div>
                <div class="button">
                    <a href="./login.html">登录</a>
                    <a href="">注册</a>
                </div>
                <div class="line"></div>
                <div class="foot">
                    <a href="">全民云计算</a>
                    <span> | </span>
                    <a href="">免费试用</a>
                </div>
            </div>
            <div class="right hidden">
                <div class="avatar"><img src="https://img.alicdn.com/tfs/TB1Sv5PV9zqK1RjSZPcXXbTepXa-80-80.png" alt="头像"></div>
                <div CLASS="text">Hi! <span></span></div>
                <div class="button">
                    <a href="" >控制台</a>
                </div>
                <div class="line">
                    <span>备案专区</span>
                </div>
                <div class="foot">
                    <li>
                        <div class="tc">0</div>
                        <div>待付款</div>
                    </li>
                    <li>
                        <div class="tc">0</div>
                        <div>待续费</div>
                    </li>
                    <li>
                        <div class="tc" id='point'></div>
                        <div>积分</div>
                    </li>
                    <li>
                        <div class="tc">0</div>
                        <div>代金券</div>
                    </li>
                    <li>
                        <div class="tc" id="money"></div>
                        <div>账户余额</div>
                    </li>
                    <li>
                        <div class="tc" id="msg"></div>
                        <div>站内信</div>
                    </li>
                </div>
            </div>
        </div>
    </div>
    <script>
        function get(){
            $.ajax({
                type: "get",
                url: "http://playground.it266.com/profile?token="+localStorage.getItem('token'),
                success: function(data){
                    $(".block").css({ "display": "none" });
                    $(".hidden").css({ "display": "block" });
                    let list = JSON.parse(data).data
                    $('.hidden img').attr('src',list.avatar)
                    $('.hidden .text span').text(list.username)
                    $('.hidden #money').text(list.balance)
                    $('.hidden #msg').text(list.message)
                    $('.hidden #point').text(list.point)
                }
            });
        }
        get()
        var i = 1
        //获得所有li的对象
        var imgobj = document.getElementsByClassName('imgli')
        var bobj = document.getElementsByClassName('control')
        //自动轮播
        function auto() {
            clearInterval(auto)
            $('.active').attr('class','imgli')
            $('.action').attr('class','control')
            $(imgobj[i]).addClass('active')
            $(bobj[i]).addClass('action')
            i++
            if (i>=5){
                i=0
            }
        }
        setInterval(()=>{auto()},3000)
        $('.button li').click(function () {
            var index = $(".button li").index(this);
            button(this,index)
        })
        //点击轮播
        function button(obj,num) {
            $('.active').attr('class','imgli')
            $('.action').attr('class','control')
            $(imgobj[num]).addClass('active')
            $(obj).addClass('action')
        }
    </script>
</body>
</html>